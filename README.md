# nearest_bars

Проект предназначен для отображения на html-карте ближайших 5 (пяти) баров/питейных заведений.
Для работы требуется база данных баров Москвы.
На вход подается адрес, ближайшие бары к которому будут подписанными маркерами отмечены на карте.

### NEW! Установка и использование в тестовом режиме с docker-compose

Вариант № 1 - создание образа-контейнера

Сохраняем файлы на сервер linux и переходим в папку nearest_bars. Сюда же сохраняем json файл с базой данных баров Москвы - [скачать тут](https://drive.google.com/open?id=1gF3NpK95AiKsAjJ2Uv-gQIA-d_bbKyEN)

```
sudo docker-compose up --build
```
Вариант # 2 - использование готового образа-контейнера [https://hub.docker.com/r/theegid/nearest_bars](https://hub.docker.com/r/theegid/nearest_bars)

```
sudo docker pull theegid/nearest_bars
```

Сервис будет установлен и запущен на сервере на порту 8080.

### Как установить

Скачиваем файлы и переходим в папку nearest_bars. Сюда же сохраняем json файл с базой данных баров Москвы - [скачать тут](https://drive.google.com/open?id=1gF3NpK95AiKsAjJ2Uv-gQIA-d_bbKyEN)

Python 3.7 должен быть уже установлен. Затем используйте pip (или pip3, если есть конфликт с Python2) для установки зависимостей:

```
pip install -r requirements.txt
```

### Использование

Переходим в каталог с программой. Используя консольный ввод, аргументом передаем адрес. Программа будет выводить в консоль лог своей работы.
Результатом работы будет запущенный веб-сервер Flask и выведенная в консоли html ссылка на сгенерированную карту с адресом и отметками 5 ближайших баров.

```
python3 main.py Москва Кленовый бульвар 9
```

### Тестовый режим

В работе программы в целях отладки и ускорения работы используется временный файл .json. По умолчанию он очищается. 
Если требуется протестировать программу для проверки работы с одинаковым адресом, то первым аргументом 
передаем этот адрес, а дополнительным вторым аргументом после пробела передаем ключ **--test**.

```
python3 main.py Москва Кленовый бульвар 9 --test
```

### Цель проекта

Код написан в образовательных целях на онлайн-курсе для веб-разработчиков [dvmn.org](https://dvmn.org/).


