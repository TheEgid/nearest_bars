# nearest_bars

Проект предназначен для отображения на html-карте ближайших 5 (пяти) баров/питейных заведений.
Для работы требуется база данных баров Москвы.
На вход подается адрес, ближайшие бары к которому будут подписанными маркерами отмечены на карте.

### NEW! Установка и использование в тестовом режиме с docker и docker-compose

Скачиваем файлы и переходим в папку nearest_bars (где main.py). Сюда же распаковываем архив с файлом базы данных баров Москвы - [скачать тут](https://yadi.sk/d/AuhpRpLRgD-avA)
Регистрируемся на сайте [https://locationiq.com/](https://locationiq.com/) и получаем api-token.
Обязательно создаем .env файл. Ваш .env должен содержать строки:

```
API_TOKEN=ваш_токен
```

создание образа -

```
sudo docker-compose up --build
```

запуск контейнера из образа -

```
sudo docker run -d -p 8080:8080 nearest_bars_web
```

Сервис будет установлен и запущен на сервере на порту 8080.

### Как установить

Скачиваем файлы и переходим в папку nearest_bars (где main.py). Сюда же распаковываем архив с файлом базы данных баров Москвы - [скачать тут](https://yadi.sk/d/AuhpRpLRgD-avA)
Регистрируемся на сайте [https://locationiq.com/](https://locationiq.com/) и получаем api-token.
Обязательно создаем .env файл. Ваш .env должен содержать строки:

```
API_TOKEN=ваш_токен
```

Python 3.9 должен быть уже установлен. Затем используйте pip для установки зависимостей:

```
pip install -r requirements.txt
```

### Использование

Переходим в папку с программой. Используя консольный ввод, аргументом передаем адрес. Программа будет выводить в консоль лог своей работы.
Результатом работы будет запущенный веб-сервер Flask и выведенная в консоли html ссылка на сгенерированную карту с адресом и отметками 5 ближайших баров.

```
python main.py Москва Кленовый бульвар 9
```

### Тестовый режим

В работе программы в целях отладки и ускорения работы используется временный файл .json. По умолчанию он очищается. 
Если требуется протестировать программу для проверки работы с одинаковым адресом, то первым аргументом 
передаем этот адрес, а дополнительным вторым аргументом после пробела передаем ключ **--test**.

```
python main.py Москва Кленовый бульвар 9 --test
```

### Цель проекта

Код написан в образовательных целях на онлайн-курсе для веб-разработчиков [dvmn.org](https://dvmn.org/).
